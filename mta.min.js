!function(a,b){function c(){var c="-",d=g.encode,e=a.screen,f=a.navigator,h=this._getViewport();this.screen=e?e.width+"x"+e.height:c,this.viewport=h.width+"x"+h.height,this.charset=d(b.characterSet?b.characterSet:b.charset?b.charset:c),this.language=(f&&f.language?f.language:f&&f.browserLanguage?f.browserLanguage:c).toLowerCase(),this.javaEnabled=f&&f.javaEnabled()?1:0,this.isFirstVisit=!1,this.setCookie()}function d(a){this.imageUrl=a}function e(a){this._config=g.merge({sampleRate:100,useCombo:!0,beacon:b.location.protocol+"//frep."+("object"==typeof M?M.CDN_DOMAIN_HOST:"meituan.net")+"/_.gif"},a||{}),this._client=new c,this._beacon=new d(this._config.beacon),this._queue=[],this._timer=null,this.app=null,this.tags={},this.visitorCode=g.random()}var f=Object.prototype.hasOwnProperty,g={hash:function(a){var b,c=1,d=0;if(a)for(c=0,b=a.length-1;b>=0;b--)d=a.charCodeAt(b),c=(c<<6&268435455)+d+(d<<14),d=266338304&c,c=0!==d?c^d>>21:c;return c},random:function(){return Math.round(2147483647*Math.random())},stringify:function(a){if("undefined"!=typeof JSON&&JSON.stringify)return JSON.stringify(a);var b=typeof a;switch(b){case"string":return'"'+a+'"';case"boolean":case"number":return String(a);case"object":if(null===a)return"null";var c=!1,d="";for(var e in a)if(f.call(a,e)){var h=""+e,i=g.stringify(a[e]);i.length&&(c?d+=",":c=!0,d+=a instanceof Array?i:'"'+h+'":'+i)}return a instanceof Array?"["+d+"]":"{"+d+"}";default:return""}},debug:function(a,b){"undefined"!=typeof console&&console.log&&(b&&console.warn?console.warn(a):console.log(a))},encode:function(a,b){return encodeURIComponent instanceof Function?b?encodeURI(a):encodeURIComponent(a):escape(a)},decode:function(a,b){var c;if(a=a.split("+").join(" "),decodeURIComponent instanceof Function)try{c=b?decodeURI(a):decodeURIComponent(a)}catch(d){c=unescape(a)}else c=unescape(a);return c},merge:function(a,b){for(var c in b)f.call(b,c)&&(a[c]=b[c]);return a},buildQueryString:function(a){var b,c=g.encode,d=[];for(b in a)if(f.call(a,b)){var e="object"==typeof a[b]?g.stringify(a[b]):a[b];d.push(c(b)+"="+c(e))}return d.join("&")},addEventListener:function(b,c,d){return a.addEventListener?a.addEventListener(b,c,d):a.attachEvent?a.attachEvent("on"+b,c):void 0},onload:function(a){"complete"===b.readyState?a():g.addEventListener("load",a,!1)},domready:function(a){"interactive"===b.readyState?a():b.addEventListener?b.addEventListener("DOMContentLoaded",a,!1):b.attachEvent&&b.attachEvent("onreadystatechange",a)},onunload:function(a){g.addEventListener("unload",a,!1),g.addEventListener("beforeunload",a,!1)},now:function(){return(new Date).getTime()}},h={get:function(a){for(var c=b.cookie,d=a+"=",e=d.length,f=c.length,g=0;f>g;){var h=g+e;if(c.substring(g,h)===d)return this._getValue(h);if(g=c.indexOf(" ",g)+1,0===g)break}return""},set:function(a,c,d,e,f,g){f=f?f:this._getDomain(),b.cookie=a+"="+encodeURIComponent(c)+(d?"; expires="+d:"")+(e?"; path="+e:"; path=/")+(f?"; domain="+f:"")+(g?"; secure":"")},getExpire:function(a,b,c){var d=new Date;return"number"==typeof a&&"number"==typeof b&&"number"==typeof b?(d.setDate(d.getDate()+parseInt(a,10)),d.setHours(d.getHours()+parseInt(b,10)),d.setMinutes(d.getMinutes()+parseInt(c,10)),d.toGMTString()):void 0},_getValue:function(a){var c=b.cookie,d=c.indexOf(";",a);return-1===d&&(d=c.length),decodeURIComponent(c.substring(a,d))},_getDomain:function(){var a=b.domain;return"undefined"!=typeof M&&M.DOMAIN_HOST&&(a="."+M.DOMAIN_HOST),"www."===a.substring(0,4)&&(a=a.substring(4)),a}},i="__mta";c.prototype={setCookie:function(){var a=h.get(i),b=h.getExpire(720,0,0),c=g.now();if(a)a=a.split("."),a[2]=a[3],a[3]=c,a[4]=parseInt(a[4],10)+1,h.set(i,a.join("."),b),this.uuid=a[0];else{var d=this._hashInfo(),e=c,f=c,j=c,k=1;a=[d,e,f,j,k].join("."),h.set(i,a,b),this.isFirstVisit=!0,this.uuid=d}},getInfo:function(){return{sr:this.screen,vp:this.viewport,csz:b.cookie?b.cookie.length:0}},_hashInfo:function(){var c=a.navigator,d=a.history.length;c=c.appName+c.version+this.language+c.platform+c.userAgent+this.javaEnabled+this.screen+(b.cookie?b.cookie:"")+(b.referrer?b.referrer:"");for(var e=c.length;d>0;)c+=d--^e++;return g.hash(c)},_getViewport:function(){return null!==a.innerWidth?{width:a.innerWidth,height:a.innerHeight}:"CSS1Compat"===b.compatMode?{width:b.documentElement.clientWidth,height:b.documentElement.clientHeight}:{width:b.body.clientWidth,height:b.body.clientWidth}}},d.prototype={send:function(a,b){var c=g.buildQueryString(a);c.length&&(c.length<=4096?this._sendByImage(c,b):this._sendByImage("err=len&max=2036&len="+c.length,b))},_sendByImage:function(a,b){var c=new Image(1,1);c.src=this.imageUrl+"?"+a,c.onload=function(){c.onload=null,b&&b()}}},e.VERSION=3,e.Plugins={},e.addPlugin=function(a,b){if("function"!=typeof b.data)throw new Error("cannot add plugin: "+a);e.Plugins[a]=b},e.prototype={push:function(){for(var a=Array.prototype.slice,b=0,c=0,d=arguments.length;d>c;c++)try{var e=arguments[c];if("function"==typeof e)arguments[c](this);else{e=a.call(e,0);var f=e[0];this[f].apply(this,e.slice(1))}}catch(g){b++}return b},create:function(a,b){this.app=a,this._config=g.merge(this._config,b||{})},config:function(a,b){switch(a){case"sampleRate":"number"==typeof b&&(this._config.sampleRate=b);break;case"beaconImage":b&&(this._config.beacon=b,this._beacon=new d(this._config.beacon))}},tag:function(a,b){"undefined"!=typeof b?this.tags[a]=b:"undefined"!=typeof this.tags[a]&&delete this.tags[a]},send:function(b,c,d){if(b){var f=e.Plugins[b],g=!1;if(f?(c=f.data(),c&&(g=!0,this._queue.push({category:b,type:f.type||"timer",data:c}))):"undefined"!=typeof c&&(g=!0,this._queue.push({category:b,type:d||"timer",data:c})),g){var h=this;this._timer&&(a.clearTimeout(this._timer),this._timer=null),this._timer=a.setTimeout(function(){h._send.call(h)},200)}}},timing:function(a,b){this.send(a,b,"timer")},count:function(a,b){this.send(a,b,"counter")},gauge:function(a,b){this.send(a,b,"gauge")},_send:function(a,b){if(this.app&&this._isSample(b)){var c=g.merge,d=this._config.useCombo,e=this._client.getInfo(),f=c({app:this.app,type:"combo"},a);if(f=c(f,this.tags),f=c(f,e),a)return this._beacon.send(f);if(this._queue.length){if(d)1===this._queue.length?(f=c(f,this._queue[0]),this._beacon.send(f)):(f.data=this._queue,this._beacon.send(f));else for(var h=0,i=this._queue.length;i>h;h++)this._beacon.send(this._queue[h]);this._queue=[]}}},_isSample:function(a){return a=a>0?a:this._config.sampleRate,this.visitorCode%1e4<100*a}},e.addPlugin("network",{type:"timer",data:function(){var b=a,c=b.performance||b.mozPerformance||b.msPerformance||b.webkitPerformance;if(c){var d=c.timing,e={connection:d.connectEnd-d.connectStart,domainLookup:d.domainLookupEnd-d.domainLookupStart,request:d.responseStart-d.requestStart,response:d.responseEnd-d.responseStart};return e}}}),e.addPlugin("page",{type:"timer",data:function(){var b=a,c=b.performance||b.mozPerformance||b.msPerformance||b.webkitPerformance;if(c){var d=c.timing,e={connection:d.connectEnd-d.connectStart,domainLookup:d.domainLookupEnd-d.domainLookupStart,request:d.responseStart-d.requestStart,response:d.responseEnd-d.responseStart,load:d.loadEventEnd,loadevent:d.loadEventEnd-d.loadEventStart,domready:d.domContentLoadedEventStart-d.domLoading,domcomplete:d.domComplete-d.domLoading};if(d.msFirstPaint&&(e.firstPaint=d.msFirstPaint),b.chrome&&b.chrome.loadTimes){var f=b.chrome.loadTimes();e.firstPaint=Math.round(1e3*(f.firstPaintTime-f.startLoadTime))}return"undefined"!=typeof M&&M.TimeTracker&&M.TimeTracker.fst&&(e.firstScreen=M.TimeTracker.fst-e.st),e}}}),e.addPlugin("resource",{type:"timer",data:function(){if("object"==typeof M&&M.subresources&&M.subresources.names&&j){a.SubResoucesTiming=j;var b=M.subresources.lastImage||"",c=M.subresources.firstImage||"",d=new j(M.subresources.names,b,c);if(d)return d}}});var j;j=function(){function b(b,o,p){var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;if(a.performance&&a.performance.getEntries&&[].forEach&&[].indexOf){for(w=navigator.userAgent.indexOf(!0)?!0:!1,B=[].concat(b),z=0,y=0,E=[],D={},A=function(a,b){return D[a]&&D[b]&&-1!==D[a]&&-1!==D[b]?D[a]-D[b]:-1},M=a.performance.getEntries(),K=0,L=M.length;L>K&&(x=M[K],B.length);K++)v=B.indexOf(x.name),-1!==v&&(B.splice(v,1),C={},D={},j.forEach(function(a){var b;return(b=Math.max(x[a],0))?(D[a]=(b||-1).toFixed(0),D[a]):void 0}),q=A(f,n),t=A(e,f),r=A(c,d),G=A(k,c),F=A(m,k),I=A(l,m),s=0,w?D.fetchStart===D.requestStart&&D.requestStart===D.responseStart&&D.responseStart!==D.responseEnd&&(s=1):0!==D.domainLookupStart&&0===D.requestStart&&(s=1),H=i(x.name),u=h(x.initiatorType,x.name),J=null,(x.name===o||o&&o.push&&-1!==o.indexOf(x.name))&&(J=x.name,y=D[l]),p&&x.name===p&&(z=D[n]),C={start:D[n],duration:D[g],dc:s,server:H,type:x.initiatorType,id:u},J&&(C.url=J),~q&&(C.b=q),~t&&(C.d=t),~r&&(C.c=r),~G&&(C.s=G),~F&&(C.r=F),~I&&(C.t=I),E.push(C));return z&&y&&(C={start:z,duration:y-z,type:"items",id:"fsImg"},E.push(C)),E}}var c,d,e,f,g,h,i,j,k,l,m,n;return h=function(a,b){var c;return"img"===a?c=/logo/.test(b)?"logo":"content":"script"===a?/deps/.test(b)?c="deps":/mt-core/.test(b)&&(c="yui"):"link"===a&&(c=/common/.test(b)?"base":"widget"),c},i=function(a){var b;return b=/^https?:\/\/(\w+)(?:\.)/.exec(a),b[1]||""},n="startTime",f="domainLookupStart",e="domainLookupEnd",d="connectStart",c="connectEnd",k="requestStart",m="responseStart",l="responseEnd",g="duration",j=[n,d,c,f,e,k,m,l,g],b}(),g.onload(function(){if(a.MeituanAnalyticsObject){var b=Object.prototype.toString,c=new e,d=a[a.MeituanAnalyticsObject],f=d?d.q:[];d.q=c,f&&"[object Array]"===b.call(f)&&c.push.apply(c,f)}})}(window,document);